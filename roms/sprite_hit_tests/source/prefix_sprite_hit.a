      .include "prefix_ppu.a"

sprites     = $200
sprite_y    = $200
sprite_tile = $201
sprite_attr = $202
sprite_x    = $203

; Clear sprite table
clear_sprite_table:
      lda   #$f8
      ldx   #0
:     sta   sprites,x
      inx
      bne   -
      rts
      .code

; Use DMA to copy sprite table to PPU
; Preserved: A, X, Y
dma_sprite_table:
      pha
      lda   #0
      sta   $2003
      lda   #$02
      sta   $4014 ; 57587
      pla
      rts
      .code

; Set sprite 0 X and Y in table
; Preserved: A, X, Y
set_sprite_xy:
      stx   sprite_x
      sty   sprite_y
      rts
      .code

; Set sprite 0 X and Y in PPU
; Preserved: A, X, Y
set_sprite_xy_ppu:
      pha
      lda   #0
      sta   $2003
      sty   $2004
      lda   #3
      sta   $2003
      stx   $2004
      pla
      rts
      .code

tiles:
      ; 0-3 filled, color 0, 1/2, 2/1, 3 (not sure which of the 1/2)
blank_tile = 0
      .db   $00,$00,$00,$00,$00,$00,$00,$00 ; 0
      .db   $00,$00,$00,$00,$00,$00,$00,$00

      .db   $ff,$ff,$ff,$ff,$ff,$ff,$ff,$ff
      .db   $00,$00,$00,$00,$00,$00,$00,$00
      
      .db   $00,$00,$00,$00,$00,$00,$00,$00
      .db   $ff,$ff,$ff,$ff,$ff